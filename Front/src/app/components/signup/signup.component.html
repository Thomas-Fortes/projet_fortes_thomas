<div class="auth-container">
  <div class="auth-card">
    <h2>Inscription</h2>

    <div class="error-message" *ngIf="errorMessage">
      {{ errorMessage }}
    </div>

    <form [formGroup]="signupForm" (ngSubmit)="onSubmit()">
      <div class="form-row">
        <div class="form-group">
          <label for="nom">Nom</label>
          <input
            type="text"
            id="nom"
            formControlName="nom"
            placeholder="Votre nom"
            [class.invalid]="f['nom'].invalid && f['nom'].touched"
          />
          <div class="error" *ngIf="f['nom'].invalid && f['nom'].touched">
            <span *ngIf="f['nom'].errors?.['required']">Le nom est requis</span>
            <span *ngIf="f['nom'].errors?.['minlength']">Minimum 2 caracteres</span>
          </div>
        </div>

        <div class="form-group">
          <label for="prenom">Prenom</label>
          <input
            type="text"
            id="prenom"
            formControlName="prenom"
            placeholder="Votre prenom"
            [class.invalid]="f['prenom'].invalid && f['prenom'].touched"
          />
          <div class="error" *ngIf="f['prenom'].invalid && f['prenom'].touched">
            <span *ngIf="f['prenom'].errors?.['required']">Le prenom est requis</span>
            <span *ngIf="f['prenom'].errors?.['minlength']">Minimum 2 caracteres</span>
          </div>
        </div>
      </div>

      <div class="form-group">
        <label for="email">Email</label>
        <input
          type="email"
          id="email"
          formControlName="email"
          placeholder="votre@email.com"
          [class.invalid]="f['email'].invalid && f['email'].touched"
        />
        <div class="error" *ngIf="f['email'].invalid && f['email'].touched">
          <span *ngIf="f['email'].errors?.['required']">L'email est requis</span>
          <span *ngIf="f['email'].errors?.['email']">Format d'email invalide</span>
        </div>
      </div>

      <div class="form-group">
        <label for="password">Mot de passe</label>
        <input
          type="password"
          id="password"
          formControlName="password"
          placeholder="Minimum 6 caracteres"
          [class.invalid]="f['password'].invalid && f['password'].touched"
        />
        <div class="error" *ngIf="f['password'].invalid && f['password'].touched">
          <span *ngIf="f['password'].errors?.['required']">Le mot de passe est requis</span>
          <span *ngIf="f['password'].errors?.['minlength']">Minimum 6 caracteres</span>
        </div>
      </div>

      <div class="form-group">
        <label for="confirmPassword">Confirmer le mot de passe</label>
        <input
          type="password"
          id="confirmPassword"
          formControlName="confirmPassword"
          placeholder="Confirmez votre mot de passe"
          [class.invalid]="f['confirmPassword'].invalid && f['confirmPassword'].touched"
        />
        <div class="error" *ngIf="f['confirmPassword'].invalid && f['confirmPassword'].touched">
          <span *ngIf="f['confirmPassword'].errors?.['required']">La confirmation est requise</span>
          <span *ngIf="f['confirmPassword'].errors?.['passwordMismatch']">Les mots de passe ne correspondent pas</span>
        </div>
      </div>

      <button type="submit" [disabled]="signupForm.invalid || loading" class="btn-primary">
        {{ loading ? 'Inscription...' : 'S\'inscrire' }}
      </button>
    </form>

    <div class="auth-links">
      <p>Deja un compte ? <a routerLink="/login">Se connecter</a></p>
    </div>
  </div>
</div>
